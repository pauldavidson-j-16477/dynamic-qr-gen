<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Zoho Backstage For Attendees</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            padding: 50px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .container { 
            max-width: 420px; 
            margin: 0 auto; 
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
        }
        .download-btn {
            display: inline-block;
            padding: 15px 30px;
            background: #fff;
            color: #333;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            margin: 10px;
        }
        .hint { opacity: 0.9; font-size: 14px; }
    </style>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="canonical" href="https://pauldavidson-j-16477.github.io/dynamic-qr-gen/" />
    <meta name="robots" content="noindex" />
    <noscript>
        <style>
            #status { display: none; }
        </style>
    </noscript>
    <script>
        // Configuration for Zoho Backstage For Attendees
        const playPackageName = 'com.zoho.backstage';
        const appStoreId = '1324912655';

        // Deep links (open store apps directly) and web fallbacks
        const androidDeepLink = `market://details?id=${playPackageName}`;
        const androidWebLink = `https://play.google.com/store/apps/details?id=${playPackageName}`;
        const iosDeepLink = `itms-apps://itunes.apple.com/app/id${appStoreId}`;
        const iosWebLink = `https://apps.apple.com/in/app/zoho-backstage-for-attendees/id${appStoreId}`;

        function detectPlatform() {
            const ua = navigator.userAgent || '';
            const isAndroid = /android/i.test(ua);
            // iPadOS 13+ may report as Mac; detect via touch points
            const isIOS = /iPad|iPhone|iPod/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
            return { isAndroid, isIOS };
        }

        function openWithFastFallback(deepLink, webLink, announceText) {
            const statusEl = document.getElementById('status');
            if (statusEl && announceText) statusEl.textContent = announceText;

            let fallbackTimerId = null;
            let didHide = false;

            // If the page becomes hidden (user switched to store/app), cancel fallback
            const handleVisibility = () => {
                if (document.hidden) {
                    didHide = true;
                    if (fallbackTimerId) {
                        clearTimeout(fallbackTimerId);
                        fallbackTimerId = null;
                    }
                }
            };
            document.addEventListener('visibilitychange', handleVisibility, { once: false });

            // Schedule a quick web fallback if the deep link didn't take effect
            fallbackTimerId = setTimeout(() => {
                if (!didHide) {
                    window.location.replace(webLink);
                }
            }, 900);

            // Attempt deep link immediately and avoid adding to history
            try {
                window.location.replace(deepLink);
            } catch (e) {
                // If deep link throws synchronously, go to web immediately
                if (fallbackTimerId) clearTimeout(fallbackTimerId);
                window.location.replace(webLink);
            }
        }

        function attemptRedirect() {
            const { isAndroid, isIOS } = detectPlatform();

            if (isIOS) {
                openWithFastFallback(iosDeepLink, iosWebLink, 'Opening App Store...');
                return;
            }

            if (isAndroid) {
                openWithFastFallback(androidDeepLink, androidWebLink, 'Opening Google Play...');
                return;
            }

            // Desktop or unknown device
            const statusEl = document.getElementById('status');
            if (statusEl) statusEl.textContent = 'Choose your platform to download:';
        }

        document.addEventListener('DOMContentLoaded', attemptRedirect);
    </script>
</head>
<body>
    <div class="container">
        <h1>ðŸ“± Download Zoho Backstage For Attendees</h1>
        <div id="status">Redirecting to your app store...</div>
        <p class="hint">If you're not redirected automatically, select your platform:</p>
        <a href="https://play.google.com/store/apps/details?id=com.zoho.backstage" class="download-btn">Google Play</a>
        <a href="https://apps.apple.com/in/app/zoho-backstage-for-attendees/id1324912655" class="download-btn">App Store</a>
    </div>
</body>
</html>


